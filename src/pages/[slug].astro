---
import type { Post as PostType } from '@wordpress/core-data';
import HtmlLayout from '@layouts/HtmlLayout.astro';
import { getPostsSlug, getPost } from '@services/data';
import Post from '@components/Post.svelte';

const { id, title } = Astro.props;

export async function getStaticPaths() {
  const postsSlug:PostType[] = await getPostsSlug();

  return postsSlug.map((post) => ({
    params: { slug: post.slug },
    props: {
      id: post.id,
      title: post.title.rendered,
    },
  }));
}

const {
  title: postTitle,
  content,
  _embedded: embedded,
} = await getPost(id, true);
---
<HtmlLayout title={title}>
  <Post
    title={postTitle}
    content={content}
    embedded={embedded}
  />
</HtmlLayout>
