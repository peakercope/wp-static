---
import HtmlLayout from '@/layouts/Html/HtmlLayout.astro';
import { postService } from '@/services';
import { Post } from '@/components';

const { id, title } = Astro.props;

export async function getStaticPaths() {
  const postsSlug = await postService.getAll(['id', 'slug', 'title']);

  return postsSlug.map((post) => ({
    params: { slug: post.slug },
    props: {
      id: post.id,
      title: post.title.rendered,
    },
  }));
}

const {
  title: postTitle,
  content,
  _embedded: embedded,
} = await postService.getById(id, true);
---
<HtmlLayout title={title}>
  <Post
    title={postTitle}
    content={content}
    embedded={embedded}
  />
</HtmlLayout>
